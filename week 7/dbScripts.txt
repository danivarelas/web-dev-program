use project;

CREATE TABLE IF NOT EXISTS user(
	id int auto_increment PRIMARY KEY not null,
    name varchar(50) not null,
    last_name varchar(50) not null,
    email varchar(50) not null unique,
    username varchar(50) not null unique,
    country_code int not null,
    phone_number int not null,
    password varchar(255) not null
);

CREATE TABLE IF NOT EXISTS account(
	id int auto_increment PRIMARY KEY not null,
    account_number varchar(20) not null unique,
    balance varchar(255) NOT NULL,
    currency varchar(3) NOT NULL,
    user_id int,
    foreign key(user_id) references user(id)
);

CREATE TABLE IF NOT EXISTS credit_card(
	id int auto_increment PRIMARY KEY not null,
    card_number varchar(12) not null unique,
    card_limit varchar(255) not null,
    currency varchar(3) not null,
    balance varchar(255) not null,
    payment_date date not null,
    user_id int,
    foreign key(user_id) references user(id)
);

CREATE TABLE IF NOT EXISTS loan(
	id int auto_increment PRIMARY KEY not null,
    loan_number varchar(20) not null unique,
    amount varchar(255) not null,
    currency varchar(3) not null,
    interest_rate decimal(4,2) not null,
    loan_due_date date not null,
    user_id int,
    foreign key(user_id) references user(id)
);

CREATE TABLE IF NOT EXISTS transfer(
	id int auto_increment PRIMARY KEY not null,
    transfer_number varchar(20) not null unique,
    transfer_description varchar(255) not null,
    amount varchar(255) not null,
    transfer_date date not null,
    source_account_id int,
    target_account_id int,
    foreign key(source_account_id) references account(id),
    foreign key(target_account_id) references account(id)
);

CREATE TABLE IF NOT EXISTS service_type(
	id int auto_increment PRIMARY KEY not null,
    service_type_name varchar(50) not null unique
);

CREATE TABLE IF NOT EXISTS service(
	id int auto_increment PRIMARY KEY not null,
    service_name varchar(100) not null unique,
    service_type_id int,
    foreign key(service_type_id) references service_type(id)
);

CREATE TABLE IF NOT EXISTS payment(
	id int auto_increment PRIMARY KEY not null,
    payment_number varchar(20) not null unique,
    payment_description varchar(255) not null,
    amount varchar(255) not null,
    user_id int,
    account_id int,
    foreign key(user_id) references user(id),
    foreign key(account_id) references account(id)
);

select * from account;
delete from user where id=3;

insert into account
values (8,'1234567899', '0.00', 'USD', 1);

drop table user, account, loan, transfer, credit_card;
drop table loan, transfer, credit_card, service_type, service, payment;
drop table transfer;